{% extends app.request.xmlHttpRequest or init is defined ? '@ZghFE/Default/inner_ajax_layout.html.twig':'@ZghFE/Default/product_content.html.twig' %}

{% block innerPartial %}
    <div class="row headerProduct">
        <div class="col-md-2 pull-right icons-G">
            {% if user.id == app.user.id %}
                <a href="{{ url("zgh_fe.products.get_edit", {"id": app.user.id, "product_id": product.id}) }}"
                   class="moveEditProduct btnEditProduct"><i class="glyphicon glyphicon-edit"></i> Edit</a>
            {% endif %}
            {% if "ROLE_CUSTOMER" in app.user.roles %}
                <button class="btn btn-danger btn-circle" type="button" data-target="#addwishlist"
                        data-toggle="modal">
                    <span class="glyphicon glyphicon-plus"></span>
                </button>
                <div id="addwishlist" aria-hidden="true" aria-labelledby="myModalLabel"
                     role="dialog"
                     tabindex="-1"
                     class="modal fade in">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header modalHeader">
                                <button type="button" class="close modalClose" data-dismiss="modal"
                                        aria-hidden="true">&times;</button>
                                <h4 class="modal-title" id="myModalLabel">Add to Wishlist</h4>
                            </div>
                            <div class="form_wrapper">
                                {{ include("@ZghFE/Partial/products/wishlist_edit_widget.html.twig", {"form" : addWishlistForm, "post_url": url("zgh_fe.products.add_to_wishlist", {"id": product.user.id, "product_id": product.id }) }) }}
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
            {% endif %}

            <form class="btnForm pull-right"
                  action="{{ url("zgh_fe.like.post", {"id": product.id, "entity_type": product.getObjectType }) }}"
                  method="post">
                <button type="submit" data-placement="top" data-toggle="tooltip"
                        title="{{ checkLike(app.user, product) ? "Unlike" : "Like" }}"
                        class="btn tooltip btn-danger likeBtn btn-circle {{ checkLike(app.user, product) ? "liked" : "" }}">
                    <span class="glyphicon glyphicon-heart"></span>
                </button>
                {#<button type="submit" data-placement="top" data-toggle="tooltip" title="{{ checkLike(app.user, post) ? "Unlike" : "Like" }}" class="btn tooltip btn-liked likeBtn btn-circle {{ checkLike(app.user, post) ? "liked" : "" }}">#}
                {#<span class="glyphicon glyphicon-heart"></span>#}
                {#</button>#}
            </form>

        </div>
        <h2 class=col-md-4>{{ product.name }}</h2>

        <div class="clearfix"></div>
        <p class="col-md-4">Category:<span>
                                    {% for category in product.categories %}
                                        {{ category.name }} {{ loop.index == loop.length ? "" : "-" }}
                                    {% endfor %}
                            </span></p>

    </div>
    <div class="row contentProduct">
        <p class="col-md-12">
            {{ product.description }}
        </p>
    </div>
    <div class="row">
        <span class="col-md-4 price ">Price:<span> {{ product.price }}$</span></span>
    </div>
    <div class="col-md-12">
    {{ include("@ZghFE/Partial/common/comments_section.html.twig", {"entity": product}) }}
    </div>
{% endblock innerPartial %}
